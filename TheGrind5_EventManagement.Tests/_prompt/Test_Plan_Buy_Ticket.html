<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Plan - Lu·ªìng Buy Ticket (50 Test Cases)</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        h2 {
            color: #34495e;
            background: #ecf0f1;
            padding: 10px;
            border-left: 4px solid #3498db;
            margin-top: 30px;
        }
        h3 {
            color: #2980b9;
            border-bottom: 2px solid #bdc3c7;
            padding-bottom: 5px;
        }
        .method-card {
            border: 1px solid #ddd;
            border-radius: 8px;
            margin: 15px 0;
            padding: 20px;
            background: #fafafa;
            transition: box-shadow 0.3s;
        }
        .method-card:hover {
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .method-header {
            background: #3498db;
            color: white;
            padding: 10px 15px;
            margin: -20px -20px 15px -20px;
            border-radius: 8px 8px 0 0;
            font-weight: bold;
            font-size: 1.1em;
        }
        .test-case {
            background: #e8f5e8;
            border-left: 4px solid #27ae60;
            padding: 10px;
            margin: 8px 0;
            border-radius: 4px;
        }
        .test-case.failed {
            background: #fdeaea;
            border-left-color: #e74c3c;
        }
        .test-case.warning {
            background: #fff3cd;
            border-left-color: #f39c12;
        }
        .priority {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: bold;
            margin-right: 10px;
        }
        .priority.high {
            background: #e74c3c;
            color: white;
        }
        .priority.medium {
            background: #f39c12;
            color: white;
        }
        .priority.low {
            background: #27ae60;
            color: white;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .backend { border-left: 5px solid #e74c3c; }
        .frontend { border-left: 5px solid #3498db; }
        .integration { border-left: 5px solid #f39c12; }
        .reason {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-style: italic;
            color: #6c757d;
        }
        .code-example {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
            overflow-x: auto;
        }
        .method-signature {
            background: #34495e;
            color: #ecf0f1;
            padding: 10px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéØ Test Plan - Lu·ªìng Buy Ticket (Backend Only)</h1>
        <p style="text-align: center; font-size: 1.2em; color: #7f8c8d;">
            <strong>50 Test Cases</strong> cho c√°c method tr·ªçng t√¢m nh·∫•t trong Backend Event Management
        </p>

        <div class="stats">
            <div class="stat-card">
                <div class="stat-number">50</div>
                <div>Backend Tests</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">15</div>
                <div>Methods</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">3-4</div>
                <div>Test Cases/Method</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">3-4</div>
                <div>Ng√†y Implementation</div>
            </div>
        </div>

        <h2>üîß Backend Tests (50 Test Cases)</h2>

        <!-- OrderService.CreateOrderAsync -->
        <div class="method-card backend">
            <div class="method-header">
                <span class="priority high">HIGH</span>
                OrderService.CreateOrderAsync()
            </div>
            <div class="method-signature">
                public async Task&lt;CreateOrderResponseDTO&gt; CreateOrderAsync(CreateOrderRequestDTO request, int customerId)
            </div>
            <p><strong>M√¥ t·∫£:</strong> Method core nh·∫•t c·ªßa lu·ªìng buy ticket, x·ª≠ l√Ω t·∫°o ƒë∆°n h√†ng v·ªõi validation ph·ª©c t·∫°p v√† race condition handling.</p>
            <div class="reason">
                <strong>L√Ω do ch·ªçn:</strong> ƒê√¢y l√† method quan tr·ªçng nh·∫•t, c√≥ business logic ph·ª©c t·∫°p, x·ª≠ l√Ω inventory, validation, v√† transaction. N·∫øu method n√†y l·ªói th√¨ to√†n b·ªô h·ªá th·ªëng mua v√© s·∫Ω kh√¥ng ho·∫°t ƒë·ªông.
            </div>
            <h4>5 Test Cases:</h4>
            <div class="test-case">
                <strong>‚úÖ CreateOrderAsync_ValidRequest_CreatesOrder</strong><br>
                <em>Test case th√†nh c√¥ng: T·∫°o order v·ªõi d·ªØ li·ªáu h·ª£p l·ªá</em>
            </div>
            <div class="test-case failed">
                <strong>‚ùå CreateOrderAsync_InsufficientInventory_ThrowsException</strong><br>
                <em>Test case l·ªói: H·∫øt v√©, kh√¥ng ƒë·ªß inventory</em>
            </div>
            <div class="test-case warning">
                <strong>‚ö†Ô∏è CreateOrderAsync_ConcurrentPurchase_HandlesRaceCondition</strong><br>
                <em>Test case ƒë·∫∑c bi·ªát: X·ª≠ l√Ω mua v√© ƒë·ªìng th·ªùi (race condition)</em>
            </div>
            <div class="test-case failed">
                <strong>‚ùå CreateOrderAsync_EventNotOpen_ThrowsException</strong><br>
                <em>Test case l·ªói: Event kh√¥ng m·ªü b√°n</em>
            </div>
            <div class="test-case failed">
                <strong>‚ùå CreateOrderAsync_InvalidQuantity_ThrowsException</strong><br>
                <em>Test case l·ªói: S·ªë l∆∞·ª£ng v√© kh√¥ng h·ª£p l·ªá</em>
            </div>
        </div>

        <!-- OrderService.GetAvailableQuantityWithLockAsync -->
        <div class="method-card backend">
            <div class="method-header">
                <span class="priority high">HIGH</span>
                OrderService.GetAvailableQuantityWithLockAsync()
            </div>
            <div class="method-signature">
                private async Task&lt;int&gt; GetAvailableQuantityWithLockAsync(int ticketTypeId)
            </div>
            <p><strong>M√¥ t·∫£:</strong> Method critical ƒë·ªÉ tr√°nh overselling, c√≥ database locking logic ƒë·ªÉ ƒë·∫£m b·∫£o t√≠nh nh·∫•t qu√°n d·ªØ li·ªáu.</p>
            <div class="reason">
                <strong>L√Ω do ch·ªçn:</strong> Method n√†y r·∫•t quan tr·ªçng ƒë·ªÉ tr√°nh b√°n qu√° s·ªë v√© c√≥ s·∫µn. C√≥ logic ph·ª©c t·∫°p v·ªõi database locking v√† race condition handling.
            </div>
            <h4>3 Test Cases:</h4>
            <div class="test-case">
                <strong>‚úÖ GetAvailableQuantityWithLockAsync_ValidTicketType_ReturnsQuantity</strong><br>
                <em>Test case th√†nh c√¥ng: Tr·∫£ v·ªÅ s·ªë l∆∞·ª£ng v√© c√≥ s·∫µn</em>
            </div>
            <div class="test-case warning">
                <strong>‚ö†Ô∏è GetAvailableQuantityWithLockAsync_ConcurrentAccess_HandlesLock</strong><br>
                <em>Test case ƒë·∫∑c bi·ªát: X·ª≠ l√Ω truy c·∫≠p ƒë·ªìng th·ªùi v·ªõi database lock</em>
            </div>
            <div class="test-case failed">
                <strong>‚ùå GetAvailableQuantityWithLockAsync_InvalidTicketType_ThrowsException</strong><br>
                <em>Test case l·ªói: Ticket type kh√¥ng t·ªìn t·∫°i</em>
            </div>
        </div>

        <!-- OrderController.CreateOrder -->
        <div class="method-card backend">
            <div class="method-header">
                <span class="priority high">HIGH</span>
                OrderController.CreateOrder()
            </div>
            <div class="method-signature">
                [HttpPost] public async Task&lt;IActionResult&gt; CreateOrder([FromBody] CreateOrderRequestDTO request)
            </div>
            <p><strong>M√¥ t·∫£:</strong> API endpoint ch√≠nh ƒë·ªÉ t·∫°o ƒë∆°n h√†ng, c√≥ authentication v√† error handling.</p>
            <div class="reason">
                <strong>L√Ω do ch·ªçn:</strong> ƒê√¢y l√† entry point c·ªßa API, c√≥ authentication, validation, v√† error handling. L√† ƒëi·ªÉm ti·∫øp x√∫c gi·ªØa frontend v√† backend.
            </div>
            <h4>4 Test Cases:</h4>
            <div class="test-case">
                <strong>‚úÖ CreateOrder_Success_ReturnsOk</strong><br>
                <em>Test case th√†nh c√¥ng: T·∫°o order th√†nh c√¥ng</em>
            </div>
            <div class="test-case failed">
                <strong>‚ùå CreateOrder_Unauthorized_ReturnsUnauthorized</strong><br>
                <em>Test case l·ªói: Kh√¥ng c√≥ quy·ªÅn truy c·∫≠p</em>
            </div>
            <div class="test-case failed">
                <strong>‚ùå CreateOrder_InvalidRequest_ReturnsBadRequest</strong><br>
                <em>Test case l·ªói: D·ªØ li·ªáu request kh√¥ng h·ª£p l·ªá</em>
            </div>
            <div class="test-case warning">
                <strong>‚ö†Ô∏è CreateOrder_ConcurrentPurchase_HandlesRaceCondition</strong><br>
                <em>Test case ƒë·∫∑c bi·ªát: X·ª≠ l√Ω mua v√© ƒë·ªìng th·ªùi</em>
            </div>
        </div>

        <!-- OrderController.ProcessPayment -->
        <div class="method-card backend">
            <div class="method-header">
                <span class="priority high">HIGH</span>
                OrderController.ProcessPayment()
            </div>
            <div class="method-signature">
                [HttpPost("{id}/payment")] public async Task&lt;IActionResult&gt; ProcessPayment(int id, [FromBody] PaymentRequest request)
            </div>
            <p><strong>M√¥ t·∫£:</strong> X·ª≠ l√Ω thanh to√°n, ƒë√¢y l√† b∆∞·ªõc quan tr·ªçng nh·∫•t trong lu·ªìng mua v√©.</p>
            <div class="reason">
                <strong>L√Ω do ch·ªçn:</strong> Payment l√† b∆∞·ªõc quan tr·ªçng nh·∫•t, c√≥ nhi·ªÅu validation v·ªÅ s·ªë d∆∞, quy·ªÅn h·∫°n, v√† tr·∫°ng th√°i ƒë∆°n h√†ng. ·∫¢nh h∆∞·ªüng tr·ª±c ti·∫øp ƒë·∫øn t√†i ch√≠nh.
            </div>
            <h4>4 Test Cases:</h4>
            <div class="test-case">
                <strong>‚úÖ ProcessPayment_Wallet_Success</strong><br>
                <em>Test case th√†nh c√¥ng: Thanh to√°n qua v√≠ th√†nh c√¥ng</em>
            </div>
            <div class="test-case failed">
                <strong>‚ùå ProcessPayment_InsufficientBalance_ReturnsBadRequest</strong><br>
                <em>Test case l·ªói: S·ªë d∆∞ v√≠ kh√¥ng ƒë·ªß</em>
            </div>
            <div class="test-case failed">
                <strong>‚ùå ProcessPayment_OrderNotFound_ReturnsNotFound</strong><br>
                <em>Test case l·ªói: Kh√¥ng t√¨m th·∫•y ƒë∆°n h√†ng</em>
            </div>
            <div class="test-case failed">
                <strong>‚ùå ProcessPayment_UnauthorizedUser_ReturnsForbid</strong><br>
                <em>Test case l·ªói: User kh√¥ng c√≥ quy·ªÅn thanh to√°n ƒë∆°n h√†ng n√†y</em>
            </div>
        </div>

        <!-- TicketService.CheckInTicketAsync -->
        <div class="method-card backend">
            <div class="method-header">
                <span class="priority medium">MEDIUM</span>
                TicketService.CheckInTicketAsync()
            </div>
            <div class="method-signature">
                public async Task&lt;Ticket&gt; CheckInTicketAsync(int ticketId)
            </div>
            <p><strong>M√¥ t·∫£:</strong> Check-in v√©, c√≥ business logic ph·ª©c t·∫°p v·ªõi time validation v√† status checking.</p>
            <div class="reason">
                <strong>L√Ω do ch·ªçn:</strong> C√≥ logic ph·ª©c t·∫°p v·ªÅ th·ªùi gian (event ch∆∞a b·∫Øt ƒë·∫ßu, ƒë√£ k·∫øt th√∫c), status validation, v√† c·∫≠p nh·∫≠t database.
            </div>
            <h4>3 Test Cases:</h4>
            <div class="test-case">
                <strong>‚úÖ CheckInTicketAsync_ValidTicket_UpdatesStatus</strong><br>
                <em>Test case th√†nh c√¥ng: Check-in v√© th√†nh c√¥ng</em>
            </div>
            <div class="test-case failed">
                <strong>‚ùå CheckInTicketAsync_EventNotStarted_ThrowsException</strong><br>
                <em>Test case l·ªói: Event ch∆∞a b·∫Øt ƒë·∫ßu</em>
            </div>
            <div class="test-case failed">
                <strong>‚ùå CheckInTicketAsync_AlreadyUsed_ThrowsException</strong><br>
                <em>Test case l·ªói: V√© ƒë√£ ƒë∆∞·ª£c s·ª≠ d·ª•ng</em>
            </div>
        </div>

        <!-- TicketService.GetTicketTypesByEventIdAsync -->
        <div class="method-card backend">
            <div class="method-header">
                <span class="priority medium">MEDIUM</span>
                TicketService.GetTicketTypesByEventIdAsync()
            </div>
            <div class="method-signature">
                public async Task&lt;IEnumerable&lt;TicketType&gt;&gt; GetTicketTypesByEventIdAsync(int eventId)
            </div>
            <p><strong>M√¥ t·∫£:</strong> L·∫•y danh s√°ch lo·∫°i v√© c·ªßa event, ƒë∆∞·ª£c g·ªçi nhi·ªÅu nh·∫•t, c√≥ filtering logic.</p>
            <div class="reason">
                <strong>L√Ω do ch·ªçn:</strong> Method ƒë∆∞·ª£c g·ªçi nhi·ªÅu nh·∫•t trong frontend, c√≥ filtering logic (ch·ªâ l·∫•y Active tickets), ·∫£nh h∆∞·ªüng ƒë·∫øn user experience.
            </div>
            <h4>3 Test Cases:</h4>
            <div class="test-case">
                <strong>‚úÖ GetTicketTypesByEventIdAsync_ValidEvent_ReturnsTicketTypes</strong><br>
                <em>Test case th√†nh c√¥ng: Tr·∫£ v·ªÅ danh s√°ch lo·∫°i v√©</em>
            </div>
            <div class="test-case">
                <strong>‚úÖ GetTicketTypesByEventIdAsync_OnlyActive_ReturnsActiveOnly</strong><br>
                <em>Test case th√†nh c√¥ng: Ch·ªâ tr·∫£ v·ªÅ v√© Active</em>
            </div>
            <div class="test-case">
                <strong>‚úÖ GetTicketTypesByEventIdAsync_InvalidEvent_ReturnsEmpty</strong><br>
                <em>Test case th√†nh c√¥ng: Event kh√¥ng t·ªìn t·∫°i, tr·∫£ v·ªÅ empty</em>
            </div>
        </div>

        <!-- OrderService.ValidateUserExistsAsync -->
        <div class="method-card backend">
            <div class="method-header">
                <span class="priority high">HIGH</span>
                OrderService.ValidateUserExistsAsync()
            </div>
            <div class="method-signature">
                public async Task&lt;bool&gt; ValidateUserExistsAsync(int userId)
            </div>
            <p><strong>M√¥ t·∫£:</strong> Security method, ƒë∆∞·ª£c g·ªçi trong m·ªçi request ƒë·ªÉ validate user t·ªìn t·∫°i.</p>
            <div class="reason">
                <strong>L√Ω do ch·ªçn:</strong> Method b·∫£o m·∫≠t quan tr·ªçng, ƒë∆∞·ª£c g·ªçi trong m·ªçi request. N·∫øu l·ªói s·∫Ω ·∫£nh h∆∞·ªüng to√†n b·ªô h·ªá th·ªëng authentication.
            </div>
            <h4>3 Test Cases:</h4>
            <div class="test-case">
                <strong>‚úÖ ValidateUserExistsAsync_ValidUser_ReturnsTrue</strong><br>
                <em>Test case th√†nh c√¥ng: User t·ªìn t·∫°i, tr·∫£ v·ªÅ true</em>
            </div>
            <div class="test-case">
                <strong>‚úÖ ValidateUserExistsAsync_InvalidUser_ReturnsFalse</strong><br>
                <em>Test case th√†nh c√¥ng: User kh√¥ng t·ªìn t·∫°i, tr·∫£ v·ªÅ false</em>
            </div>
            <div class="test-case failed">
                <strong>‚ùå ValidateUserExistsAsync_DatabaseError_ThrowsException</strong><br>
                <em>Test case l·ªói: L·ªói database, throw exception</em>
            </div>
        </div>

        <!-- OrderRepository.CreateOrderAsync -->
        <div class="method-card backend">
            <div class="method-header">
                <span class="priority high">HIGH</span>
                OrderRepository.CreateOrderAsync()
            </div>
            <div class="method-signature">
                public async Task&lt;Order&gt; CreateOrderAsync(Order order)
            </div>
            <p><strong>M√¥ t·∫£:</strong> Data access layer, c√≥ transaction handling v√† load related data.</p>
            <div class="reason">
                <strong>L√Ω do ch·ªçn:</strong> Repository layer quan tr·ªçng, c√≥ transaction handling v√† load related data. ·∫¢nh h∆∞·ªüng ƒë·∫øn data integrity.
            </div>
            <h4>3 Test Cases:</h4>
            <div class="test-case">
                <strong>‚úÖ CreateOrderAsync_ValidOrder_CreatesOrder</strong><br>
                <em>Test case th√†nh c√¥ng: T·∫°o order th√†nh c√¥ng</em>
            </div>
            <div class="test-case failed">
                <strong>‚ùå CreateOrderAsync_TransactionRollback_OnError</strong><br>
                <em>Test case l·ªói: Rollback transaction khi c√≥ l·ªói</em>
            </div>
            <div class="test-case">
                <strong>‚úÖ CreateOrderAsync_LoadRelatedData_Success</strong><br>
                <em>Test case th√†nh c√¥ng: Load related data th√†nh c√¥ng</em>
            </div>
        </div>

        <!-- OrderController.GetOrderById -->
        <div class="method-card backend">
            <div class="method-header">
                <span class="priority medium">MEDIUM</span>
                OrderController.GetOrderById()
            </div>
            <div class="method-signature">
                [HttpGet("{id}")] public async Task&lt;IActionResult&gt; GetOrderById(int id)
            </div>
            <p><strong>M√¥ t·∫£:</strong> API endpoint ƒë·ªÉ l·∫•y th√¥ng tin order, c√≥ authorization logic quan tr·ªçng.</p>
            <div class="reason">
                <strong>L√Ω do ch·ªçn:</strong> Authorization logic quan tr·ªçng, user ch·ªâ c√≥ th·ªÉ xem order c·ªßa m√¨nh. ·∫¢nh h∆∞·ªüng ƒë·∫øn b·∫£o m·∫≠t.
            </div>
            <h4>3 Test Cases:</h4>
            <div class="test-case">
                <strong>‚úÖ GetOrderById_Success_ReturnsOrder</strong><br>
                <em>Test case th√†nh c√¥ng: L·∫•y order th√†nh c√¥ng</em>
            </div>
            <div class="test-case failed">
                <strong>‚ùå GetOrderById_NotFound_ReturnsNotFound</strong><br>
                <em>Test case l·ªói: Order kh√¥ng t·ªìn t·∫°i</em>
            </div>
            <div class="test-case failed">
                <strong>‚ùå GetOrderById_UnauthorizedUser_ReturnsForbid</strong><br>
                <em>Test case l·ªói: User kh√¥ng c√≥ quy·ªÅn xem order n√†y</em>
            </div>
        </div>

        <!-- TicketService.CreateTicketAsync -->
        <div class="method-card backend">
            <div class="method-header">
                <span class="priority medium">MEDIUM</span>
                TicketService.CreateTicketAsync()
            </div>
            <div class="method-signature">
                public async Task&lt;Ticket&gt; CreateTicketAsync(int ticketTypeId, int orderItemId, string serialNumber)
            </div>
            <p><strong>M√¥ t·∫£:</strong> T·∫°o v√© m·ªõi, c√≥ serial number generation v√† status management.</p>
            <div class="reason">
                <strong>L√Ω do ch·ªçn:</strong> Ticket creation logic, c√≥ serial number generation v√† status management. ·∫¢nh h∆∞·ªüng ƒë·∫øn user experience.
            </div>
            <h4>3 Test Cases:</h4>
            <div class="test-case">
                <strong>‚úÖ CreateTicketAsync_ValidData_CreatesTicket</strong><br>
                <em>Test case th√†nh c√¥ng: T·∫°o v√© th√†nh c√¥ng</em>
            </div>
            <div class="test-case failed">
                <strong>‚ùå CreateTicketAsync_InvalidData_ThrowsException</strong><br>
                <em>Test case l·ªói: D·ªØ li·ªáu kh√¥ng h·ª£p l·ªá</em>
            </div>
            <div class="test-case">
                <strong>‚úÖ CreateTicketAsync_SerialNumberGeneration_Success</strong><br>
                <em>Test case th√†nh c√¥ng: Generate serial number th√†nh c√¥ng</em>
            </div>
        </div>

        <!-- OrderService.GetUserOrdersAsync -->
        <div class="method-card backend">
            <div class="method-header">
                <span class="priority medium">MEDIUM</span>
                OrderService.GetUserOrdersAsync()
            </div>
            <div class="method-signature">
                public async Task&lt;IEnumerable&lt;Order&gt;&gt; GetUserOrdersAsync(int userId)
            </div>
            <p><strong>M√¥ t·∫£:</strong> L·∫•y danh s√°ch orders c·ªßa user, ƒë∆∞·ª£c g·ªçi th∆∞·ªùng xuy√™n trong UI.</p>
            <div class="reason">
                <strong>L√Ω do ch·ªçn:</strong> User experience method, ƒë∆∞·ª£c g·ªçi th∆∞·ªùng xuy√™n. ·∫¢nh h∆∞·ªüng ƒë·∫øn performance v√† user experience.
            </div>
            <h4>3 Test Cases:</h4>
            <div class="test-case">
                <strong>‚úÖ GetUserOrdersAsync_ValidUser_ReturnsOrders</strong><br>
                <em>Test case th√†nh c√¥ng: L·∫•y orders c·ªßa user</em>
            </div>
            <div class="test-case">
                <strong>‚úÖ GetUserOrdersAsync_Empty_ReturnsEmptyList</strong><br>
                <em>Test case th√†nh c√¥ng: User ch∆∞a c√≥ order</em>
            </div>
            <div class="test-case failed">
                <strong>‚ùå GetUserOrdersAsync_InvalidUser_ThrowsException</strong><br>
                <em>Test case l·ªói: User kh√¥ng h·ª£p l·ªá</em>
            </div>
        </div>

        <!-- OrderService.UpdateOrderStatusAsync -->
        <div class="method-card backend">
            <div class="method-header">
                <span class="priority medium">MEDIUM</span>
                OrderService.UpdateOrderStatusAsync()
            </div>
            <div class="method-signature">
                public async Task&lt;bool&gt; UpdateOrderStatusAsync(int orderId, string status)
            </div>
            <p><strong>M√¥ t·∫£:</strong> C·∫≠p nh·∫≠t tr·∫°ng th√°i order, quan tr·ªçng cho state management.</p>
            <div class="reason">
                <strong>L√Ω do ch·ªçn:</strong> State management quan tr·ªçng, ·∫£nh h∆∞·ªüng ƒë·∫øn business flow v√† user experience.
            </div>
            <h4>3 Test Cases:</h4>
            <div class="test-case">
                <strong>‚úÖ UpdateOrderStatusAsync_ValidOrder_UpdatesStatus</strong><br>
                <em>Test case th√†nh c√¥ng: C·∫≠p nh·∫≠t status th√†nh c√¥ng</em>
            </div>
            <div class="test-case failed">
                <strong>‚ùå UpdateOrderStatusAsync_InvalidStatus_ThrowsException</strong><br>
                <em>Test case l·ªói: Status kh√¥ng h·ª£p l·ªá</em>
            </div>
            <div class="test-case">
                <strong>‚úÖ UpdateOrderStatusAsync_OrderNotFound_ReturnsFalse</strong><br>
                <em>Test case th√†nh c√¥ng: Order kh√¥ng t·ªìn t·∫°i, tr·∫£ v·ªÅ false</em>
            </div>
        </div>

        <!-- TicketService.RefundTicketAsync -->
        <div class="method-card backend">
            <div class="method-header">
                <span class="priority medium">MEDIUM</span>
                TicketService.RefundTicketAsync()
            </div>
            <div class="method-signature">
                public async Task&lt;Ticket&gt; RefundTicketAsync(int ticketId)
            </div>
            <p><strong>M√¥ t·∫£:</strong> Ho√†n ti·ªÅn v√©, c√≥ business logic ph·ª©c t·∫°p v·ªÅ th·ªùi gian v√† tr·∫°ng th√°i.</p>
            <div class="reason">
                <strong>L√Ω do ch·ªçn:</strong> Business logic ph·ª©c t·∫°p v·ªÅ refund policy, th·ªùi gian, v√† tr·∫°ng th√°i. ·∫¢nh h∆∞·ªüng ƒë·∫øn t√†i ch√≠nh.
            </div>
            <h4>3 Test Cases:</h4>
            <div class="test-case">
                <strong>‚úÖ RefundTicketAsync_ValidTicket_UpdatesStatus</strong><br>
                <em>Test case th√†nh c√¥ng: Ho√†n ti·ªÅn v√© th√†nh c√¥ng</em>
            </div>
            <div class="test-case failed">
                <strong>‚ùå RefundTicketAsync_EventStarted_ThrowsException</strong><br>
                <em>Test case l·ªói: Event ƒë√£ b·∫Øt ƒë·∫ßu, kh√¥ng th·ªÉ ho√†n ti·ªÅn</em>
            </div>
            <div class="test-case failed">
                <strong>‚ùå RefundTicketAsync_AlreadyRefunded_ThrowsException</strong><br>
                <em>Test case l·ªói: V√© ƒë√£ ƒë∆∞·ª£c ho√†n ti·ªÅn</em>
            </div>
        </div>

        <!-- OrderService.GetTicketTypeInventoryAsync -->
        <div class="method-card backend">
            <div class="method-header">
                <span class="priority medium">MEDIUM</span>
                OrderService.GetTicketTypeInventoryAsync()
            </div>
            <div class="method-signature">
                public async Task&lt;object&gt; GetTicketTypeInventoryAsync(int ticketTypeId)
            </div>
            <p><strong>M√¥ t·∫£:</strong> L·∫•y th√¥ng tin inventory c·ªßa ticket type, quan tr·ªçng cho UI hi·ªÉn th·ªã.</p>
            <div class="reason">
                <strong>L√Ω do ch·ªçn:</strong> Method quan tr·ªçng cho UI, ·∫£nh h∆∞·ªüng ƒë·∫øn user experience khi hi·ªÉn th·ªã s·ªë v√© c√≤n l·∫°i.
            </div>
            <h4>3 Test Cases:</h4>
            <div class="test-case">
                <strong>‚úÖ GetTicketTypeInventoryAsync_ValidTicketType_ReturnsInventory</strong><br>
                <em>Test case th√†nh c√¥ng: L·∫•y inventory th√†nh c√¥ng</em>
            </div>
            <div class="test-case failed">
                <strong>‚ùå GetTicketTypeInventoryAsync_InvalidTicketType_ThrowsException</strong><br>
                <em>Test case l·ªói: Ticket type kh√¥ng t·ªìn t·∫°i</em>
            </div>
            <div class="test-case">
                <strong>‚úÖ GetTicketTypeInventoryAsync_EmptyInventory_ReturnsZero</strong><br>
                <em>Test case th√†nh c√¥ng: H·∫øt v√©, tr·∫£ v·ªÅ 0</em>
            </div>
        </div>

        <!-- WalletService.ProcessPaymentAsync -->
        <div class="method-card backend">
            <div class="method-header">
                <span class="priority high">HIGH</span>
                WalletService.ProcessPaymentAsync()
            </div>
            <div class="method-signature">
                public async Task&lt;PaymentResult&gt; ProcessPaymentAsync(int userId, decimal amount, string description)
            </div>
            <p><strong>M√¥ t·∫£:</strong> X·ª≠ l√Ω thanh to√°n qua v√≠, c√≥ business logic ph·ª©c t·∫°p v·ªÅ s·ªë d∆∞ v√† transaction.</p>
            <div class="reason">
                <strong>L√Ω do ch·ªçn:</strong> Payment processing core, c√≥ logic ph·ª©c t·∫°p v·ªÅ s·ªë d∆∞, transaction, v√† rollback. ·∫¢nh h∆∞·ªüng tr·ª±c ti·∫øp ƒë·∫øn t√†i ch√≠nh.
            </div>
            <h4>4 Test Cases:</h4>
            <div class="test-case">
                <strong>‚úÖ ProcessPaymentAsync_ValidPayment_ProcessesSuccessfully</strong><br>
                <em>Test case th√†nh c√¥ng: Thanh to√°n th√†nh c√¥ng</em>
            </div>
            <div class="test-case failed">
                <strong>‚ùå ProcessPaymentAsync_InsufficientBalance_ThrowsException</strong><br>
                <em>Test case l·ªói: S·ªë d∆∞ kh√¥ng ƒë·ªß</em>
            </div>
            <div class="test-case failed">
                <strong>‚ùå ProcessPaymentAsync_InvalidAmount_ThrowsException</strong><br>
                <em>Test case l·ªói: S·ªë ti·ªÅn kh√¥ng h·ª£p l·ªá</em>
            </div>
            <div class="test-case warning">
                <strong>‚ö†Ô∏è ProcessPaymentAsync_ConcurrentPayment_HandlesRaceCondition</strong><br>
                <em>Test case ƒë·∫∑c bi·ªát: X·ª≠ l√Ω thanh to√°n ƒë·ªìng th·ªùi</em>
            </div>
        </div>

        <!-- OrderService.CancelOrderAsync -->
        <div class="method-card backend">
            <div class="method-header">
                <span class="priority medium">MEDIUM</span>
                OrderService.CancelOrderAsync()
            </div>
            <div class="method-signature">
                public async Task&lt;bool&gt; CancelOrderAsync(int orderId, int userId)
            </div>
            <p><strong>M√¥ t·∫£:</strong> H·ªßy ƒë∆°n h√†ng, c√≥ business logic v·ªÅ th·ªùi gian v√† refund policy.</p>
            <div class="reason">
                <strong>L√Ω do ch·ªçn:</strong> Business logic quan tr·ªçng v·ªÅ cancel policy, th·ªùi gian, v√† refund. ·∫¢nh h∆∞·ªüng ƒë·∫øn user experience v√† t√†i ch√≠nh.
            </div>
            <h4>3 Test Cases:</h4>
            <div class="test-case">
                <strong>‚úÖ CancelOrderAsync_ValidOrder_CancelsOrder</strong><br>
                <em>Test case th√†nh c√¥ng: H·ªßy order th√†nh c√¥ng</em>
            </div>
            <div class="test-case failed">
                <strong>‚ùå CancelOrderAsync_EventStarted_ThrowsException</strong><br>
                <em>Test case l·ªói: Event ƒë√£ b·∫Øt ƒë·∫ßu, kh√¥ng th·ªÉ h·ªßy</em>
            </div>
            <div class="test-case failed">
                <strong>‚ùå CancelOrderAsync_UnauthorizedUser_ThrowsException</strong><br>
                <em>Test case l·ªói: User kh√¥ng c√≥ quy·ªÅn h·ªßy order n√†y</em>
            </div>
        </div>

        <!-- TicketService.GetUserTicketsAsync -->
        <div class="method-card backend">
            <div class="method-header">
                <span class="priority medium">MEDIUM</span>
                TicketService.GetUserTicketsAsync()
            </div>
            <div class="method-signature">
                public async Task&lt;IEnumerable&lt;Ticket&gt;&gt; GetUserTicketsAsync(int userId)
            </div>
            <p><strong>M√¥ t·∫£:</strong> L·∫•y danh s√°ch v√© c·ªßa user, ƒë∆∞·ª£c g·ªçi th∆∞·ªùng xuy√™n trong UI.</p>
            <div class="reason">
                <strong>L√Ω do ch·ªçn:</strong> User experience method, ƒë∆∞·ª£c g·ªçi th∆∞·ªùng xuy√™n. ·∫¢nh h∆∞·ªüng ƒë·∫øn performance v√† user experience.
            </div>
            <h4>3 Test Cases:</h4>
            <div class="test-case">
                <strong>‚úÖ GetUserTicketsAsync_ValidUser_ReturnsTickets</strong><br>
                <em>Test case th√†nh c√¥ng: L·∫•y v√© c·ªßa user</em>
            </div>
            <div class="test-case">
                <strong>‚úÖ GetUserTicketsAsync_Empty_ReturnsEmptyList</strong><br>
                <em>Test case th√†nh c√¥ng: User ch∆∞a c√≥ v√©</em>
            </div>
            <div class="test-case failed">
                <strong>‚ùå GetUserTicketsAsync_InvalidUser_ThrowsException</strong><br>
                <em>Test case l·ªói: User kh√¥ng h·ª£p l·ªá</em>
            </div>
        </div>

        <h2>üìä T·ªïng K·∫øt Backend Testing</h2>
        <div class="stats">
            <div class="stat-card">
                <div class="stat-number">15</div>
                <div>Methods</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">50</div>
                <div>Test Cases</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">3-4</div>
                <div>Test Cases/Method</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">3-4</div>
                <div>Ng√†y Implementation</div>
            </div>
        </div>

        <h2>üéØ L√Ω Do Ch·ªçn C√°c Method N√†y</h2>
        <div class="reason">
            <strong>1. Coverage to√†n di·ªán:</strong> C√°c method n√†y cover ƒë∆∞·ª£c to√†n b·ªô lu·ªìng buy ticket t·ª´ A-Z
        </div>
        <div class="reason">
            <strong>2. Business Critical:</strong> T·∫•t c·∫£ method ƒë·ªÅu c√≥ ·∫£nh h∆∞·ªüng tr·ª±c ti·∫øp ƒë·∫øn business logic v√† user experience
        </div>
        <div class="reason">
            <strong>3. Complexity:</strong> C√°c method c√≥ logic ph·ª©c t·∫°p, validation, error handling, v√† edge cases
        </div>
        <div class="reason">
            <strong>4. Risk Assessment:</strong> C√°c method c√≥ r·ªßi ro cao n·∫øu l·ªói (payment, inventory, authentication)
        </div>
        <div class="reason">
            <strong>5. User Impact:</strong> ·∫¢nh h∆∞·ªüng tr·ª±c ti·∫øp ƒë·∫øn tr·∫£i nghi·ªám ng∆∞·ªùi d√πng v√† t√≠nh nƒÉng core c·ªßa h·ªá th·ªëng
        </div>

        <h2>üöÄ K·∫ø Ho·∫°ch Implementation Backend</h2>
        <div class="method-card">
            <div class="method-header">
                <span class="priority high">HIGH</span>
                Backend Testing Roadmap
            </div>
            <h4>Phase 1: Core Business Logic (1-2 ng√†y)</h4>
            <p>1. OrderService.CreateOrderAsync() - 5 test cases</p>
            <p>2. OrderService.GetAvailableQuantityWithLockAsync() - 3 test cases</p>
            <p>3. WalletService.ProcessPaymentAsync() - 4 test cases</p>
            <p>4. OrderService.ValidateUserExistsAsync() - 3 test cases</p>
            
            <h4>Phase 2: API Controllers (1 ng√†y)</h4>
            <p>1. OrderController.CreateOrder() - 4 test cases</p>
            <p>2. OrderController.ProcessPayment() - 4 test cases</p>
            <p>3. OrderController.GetOrderById() - 3 test cases</p>
            
            <h4>Phase 3: Service Layer (1 ng√†y)</h4>
            <p>1. TicketService.CheckInTicketAsync() - 3 test cases</p>
            <p>2. TicketService.GetTicketTypesByEventIdAsync() - 3 test cases</p>
            <p>3. TicketService.CreateTicketAsync() - 3 test cases</p>
            <p>4. TicketService.RefundTicketAsync() - 3 test cases</p>
            <p>5. TicketService.GetUserTicketsAsync() - 3 test cases</p>
            
            <h4>Phase 4: Repository & Additional Services (1 ng√†y)</h4>
            <p>1. OrderRepository.CreateOrderAsync() - 3 test cases</p>
            <p>2. OrderService.GetUserOrdersAsync() - 3 test cases</p>
            <p>3. OrderService.UpdateOrderStatusAsync() - 3 test cases</p>
            <p>4. OrderService.CancelOrderAsync() - 3 test cases</p>
            <p>5. OrderService.GetTicketTypeInventoryAsync() - 3 test cases</p>
        </div>
    </div>
</body>
</html>
